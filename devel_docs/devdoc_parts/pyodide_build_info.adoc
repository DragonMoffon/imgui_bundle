[[bindings_pyodide]]
=== Building a binary package of imgui_bundle for pyodide

link:https://pyodide.org/en/stable/development/building-and-testing-packages.html#building-and-testing-packages-out-of-tree[instructions on pyodide doc site]

==== Install pyodide-build

```
pip install pyodide-build
```

==== Set up Emscripten
```bash
git clone https://github.com/emscripten-core/emsdk.git
cd emsdk
```

```bash
PYODIDE_EMSCRIPTEN_VERSION=$(pyodide config get emscripten_version)
./emsdk install ${PYODIDE_EMSCRIPTEN_VERSION}
./emsdk activate ${PYODIDE_EMSCRIPTEN_VERSION}
source emsdk_env.sh
```

==== Build the package

The option `--exports pyinit` is important in order to avoid weird errors (see https://github.com/pyodide/pyodide/issues/2711)

```
export CMAKE_EXECUTABLE=$(which cmake)
pyodide build --exports pyinit
```

if needed, clean before build
```
rm -rf .pyodide-xbuildenv/
```
